FROM php:7.4-apache
MAINTAINER Adrian Pfleiderer <github@adrian-pfleiderer.de>

RUN			apt-get update && \
				apt-get install -y curl && \
				apt-get install -y unzip && \
				apt-get install nano && \
				apt-get install -y mariadb-client && \
				docker-php-ext-install mysqli

COPY src/ /var/www/html
COPY redcap.sql /
RUN	unzip /var/www/html/*.zip

COPY make_config.sh /
RUN chmod +x /make_config.sh
ENTRYPOINT ["/make_config.sh"]
CMD apachectl -D FOREGROUND
